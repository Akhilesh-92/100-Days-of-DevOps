# Day 34: Configure Git Hook
The Nautilus application development team was working on a git repository `/opt/blog.git` which is cloned under `/usr/src/kodekloudrepos` directory present on Storage server in Stratos DC. The team want to setup a hook on this repository, please find below more details:

* Merge the feature branch into the master branch, but before pushing your changes complete below point.

* Create a post-update hook in this git repository so that whenever any changes are pushed to the master branch, it creates a release tag with name `release-2023-06-15`, where `2023-06-15` is supposed to be the current date. For example if today is 20th June, 2023 then the release tag must be release-2023-06-20. Make sure you test the hook at least once and create a release tag for today's release.

* Finally remember to push your changes.


## Solution
SSH to Storage server, cd into the `/usr/src/kodekloudrepos/blog` and checkout to master branch
```sh
ssh natasha@ststor01
cd /usr/src/kodekloudrepos/blog
git checkout master
```

Merge the feature branch
```sh
git merge --no-ff feature -m "Merge feature into master"
```


Copy the post-update.sample to other file and give executable permissions
```sh
cd /opt/blog.git/hooks
cp post-update.sample post-update
chmod +x post-update
```


Add the below script into the file by using command `vi /opt/blog.git/hooks/post-update`
```sh
#!/bin/sh
DATE=$(date +%F)
if [ "$1" == refs/heads/master ];
then
  echo "creating release tag"
  git tag -a "release-$DATE" -m "Sunday Release"
fi
```


Now push the changes
```sh
git push origin master
```


Fetch the tags and verify the released tag
```sh
git fetch --tags
git tag
git show release-$(date +%F)
```


[Optional] Finally verify by creating a new file, add and commit the file, push the changes.
```sh
touch trigger_hook.txt
git add trigger_hook.txt
git commit -m "Trigger post-update hook"
git push origin master
```
