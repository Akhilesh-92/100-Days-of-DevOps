# Day 56: Deploy Nginx Web Server on Kubernetes Cluster
Some of the Nautilus team developers are developing a static website and they want to deploy it on Kubernetes cluster. They want it to be highly available and scalable. Therefore, based on the requirements, the DevOps team has decided to create a deployment for it with multiple replicas. Below you can find more details about it:

* Create a deployment using `nginx` image with latest tag only and remember to mention the tag i.e `nginx:latest`. Name it as `nginx-deployment`. The container should be named as `nginx-container`, also make sure replica counts are `3`.

* Create a `NodePort` type service named `nginx-service`. The nodePort should be `30011`.


## Solution
On jump host, create a dep.yaml file
```sh
kubectl create deployment nginx-deployment --image nginx:latest --replicas 3 --dry-run=client -o yaml > dep.yaml
```

Modify the dep.yaml file with container name 
> vi dep.yaml -> change container name


Create the deployment using modified dep.yaml
```sh
kubectl create -f dep.yaml
```


Create a `NodePort` type service named `nginx-service`
```sh
kubectl expose deployment nginx-deployment --type NodePort --port 80 --name nginx-service
```

Edit the service and update node port
```sh
kubectl edit service nginx-service
```
> Change NodePort to 30011, check port/targetPort=80


Verify service endpoints
```sh
kubectl exec pods/ngix-dep-dns4R -- curl http://192.16.25.10:80
```
